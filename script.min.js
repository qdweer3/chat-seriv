let currentUser=null;function togglePage(t){document.querySelectorAll(".page").forEach(function(t){t.style.display="none"}),document.getElementById(t).style.display="block"}function login(){const t=document.getElementById("loginUsername").value,o=document.getElementById("loginPassword").value,r=JSON.parse(localStorage.getItem("users"))||[],e=r.find(function(o){return o.username===t&&o.password===o});e?e.username==="admin"?(currentUser=t,togglePage("chatPage"),updateBadge(),updateOnlineUsers(r),updateButtons()):alert("You do not have permission to access this page."):alert("Invalid username or password.")}function register(){const t=document.getElementById("registerUsername").value,o=document.getElementById("registerPassword").value;if(t&&o){let r=JSON.parse(localStorage.getItem("users"))||[];r.push({username:t,password:o,createdAt:(new Date).getTime()}),localStorage.setItem("users",JSON.stringify(r)),currentUser=t,togglePage("chatPage"),updateBadge(),updateOnlineUsers(r),updateButtons()}else alert("Please enter username and password.")}function appendToFile(t,o){const r=require("fs");r.appendFileSync(t,o)}function sendMessage(){const t=document.getElementById("messageInput"),o=t.value.trim();o&&(t.value="",updateBadge())}function isNewAccount(){const t=JSON.parse(localStorage.getItem("users"))||[],o=t.find(function(o){return o.username===currentUser});if(o){const t=(new Date).getTime()-o.createdAt;return t/(1e3*60*60*24)<=3}return!1}function updateBadge(){const t=document.getElementById("newAccountBadge");if(t){if(isNewAccount())t.style.display="inline-block";else t.style.display="none"}}function logout(){currentUser=null,togglePage("loginPage")}function toggleDarkMode(){const t=document.body.classList;t.toggle("dark-mode"),localStorage.setItem("darkModeEnabled",t.contains("dark-mode"))}function updateOnlineUsers(t){const o=document.getElementById("onlineUsers");o.innerHTML="",t.forEach(function(t){const r=document.createElement("li");r.textContent=t.username,o.appendChild(r)})}function updateButtons(){const t=document.getElementById("banButton"),o=document.getElementById("muteButton");currentUser==="admin"?(t.style.display="inline-block",o.style.display="inline-block"):(t.style.display="none",o.style.display="none")}function banUser(){alert("User banned")}function muteUser(){alert("User muted")}function toggleEmojiPicker(){const t=document.querySelector(".emoji-picker");t.style.display=t.style.display==="block"?"none":"block"}function toggleAttachmentPicker(){const t=document.querySelector(".attachment-picker");t.style.display=t.style.display==="block"?"none":"block"}
